{"version":3,"sources":["EventEmitter.js","EventEmitter.ts"],"names":["_createClass","defineProperties","target","props","key","prop","configurable","value","writable","Object","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","EventEmitterListenerGroup","this","EventEmitterListenerGroup.constructor","EventEmitterListenerGroup.addListener","EventEmitterListenerGroup.removeAllListeners","EventEmitter","EventEmitter.constructor","_this","EventEmitter.addListener","EventEmitter.removeListener","EventEmitter.removeAllListeners","EventEmitter.emitEvent","EventEmitter.createListenerGroup"],"mappings":"AAAA,YAEA,IAAIA,cAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,KAAOD,GAAO,CAAE,GAAIE,GAAOF,EAAMC,EAAMC,GAAKC,cAAe,EAAUD,EAAKE,QAAOF,EAAKG,UAAW,GAAQC,OAAOR,iBAAiBC,EAAQC,GAAU,MAAO,UAAUO,EAAaC,EAAYC,GAAiJ,MAA9HD,IAAYV,EAAiBS,EAAYG,UAAWF,GAAiBC,GAAaX,EAAiBS,EAAaE,GAAqBF,MAEvaI,gBAAkB,SAAUC,EAAUL,GAAe,KAAMK,YAAoBL,IAAgB,KAAM,IAAIM,WAAU,sCCDvHC,0BAAA,WAKEA,QALFA,GAKcA,GDANH,gBAAgBI,KCLxBD,GAGUE,KAAAA,WAGNA,KAAKA,SAAWA,EDmChB,MA9BAnB,cCXJiB,GAeEA,aDKUV,MCLCU,SAACA,EAASA,GACnBG,GAAIA,GAASA,KAAKA,SAASA,YAAYA,EAAMA,EAC7CA,MAAKA,QAAQA,KAAKA,KAMpBH,oBDOUV,MCPQU,WAGhBI,IAAKA,GAFDA,GAAUA,KAAKA,QACfA,EAAUA,EAAQA,OACbA,EAAIA,EAAOA,EAAJA,EAAYA,IAC1BA,EAAQA,IAEVA,MAAKA,eA7BTJ,KAkCAK,aAAA,WAAAA,QAAAA,KDYQR,gBAAgBI,KCZxBI,GAEUC,KAAAA,yBDsGN,MAvFAvB,cCjBJsB,GAUEA,aDgBUf,MChBCe,SAACA,EAASA,GDiBP,GAAIE,GAAQN,ICXxBO,OALKA,MAAKA,sBAAsBA,eAAoBA,GAGlDA,KAAKA,sBAA2BA,GAAMA,KAAKA,GAF3CA,KAAKA,sBAA2BA,IAASA,GAIpCA,WDmBS,MCnBHA,GAAKA,eAAeA,EAAMA,MASzCH,gBDsBUf,MCtBIe,SAACA,EAASA,GACtBI,GAAIA,GAAWA,KAAKA,qBACpBA,IAAIA,EAASA,eAAoBA,GAAOA,CACtCA,GAAIA,GAAUA,EAAcA,GACxBA,EAAQA,EAAQA,QAAQA,EACdA,MAAVA,GACFA,EAAQA,OAAOA,EAAOA,MAU5BJ,oBDwBUf,MCxBQe,SAACA,GACGK,mBAATA,GACTA,KAAKA,yBACIA,KAAKA,sBAAsBA,eAAoBA,UACjDA,MAAKA,sBAA2BA,KAU3CL,WD0BUf,MC1BDe,SAACA,EAASA,GACjBM,GAAIA,KAAKA,sBAAsBA,eAAoBA,GAGjDA,IAAKA,GAFDA,GAAYA,KAAKA,sBAA2BA,GAC5CA,EAASA,EAAUA,OACdA,EAAIA,EAAOA,EAAJA,EAAYA,IAC1BA,EAAUA,GAAGA,KAUnBN,qBD4BUf,MC5BSe,WACjBO,MAAOA,IAAIA,2BAA0BA,UAvEzCP","file":"EventEmitter.js","sourcesContent":["\"use strict\";\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\nvar EventEmitterListenerGroup = (function () {\n    function EventEmitterListenerGroup(emitter) {\n        _classCallCheck(this, EventEmitterListenerGroup);\n\n        this._unbind = [];\n        this._emitter = emitter;\n    }\n\n    _createClass(EventEmitterListenerGroup, {\n        addListener: {\n            /**\n             * Add an event listener\n             *\n             * @param name The event to subscribe to\n             * @param callback The callback function to invoke\n             */\n\n            value: function addListener(name, callback) {\n                var unbind = this._emitter.addListener(name, callback);\n                this._unbind.push(unbind);\n            }\n        },\n        removeAllListeners: {\n            /**\n             * Remove all event listeners in group\n             */\n\n            value: function removeAllListeners() {\n                var unbinds = this._unbind;\n                var length = unbinds.length;\n                for (var i = 0; i < length; i++) {\n                    unbinds[i]();\n                }\n                this._unbind = [];\n            }\n        }\n    });\n\n    return EventEmitterListenerGroup;\n})();\n\nvar EventEmitter = (function () {\n    function EventEmitter() {\n        _classCallCheck(this, EventEmitter);\n\n        this._eventEmitterChannels = {};\n    }\n\n    _createClass(EventEmitter, {\n        addListener: {\n            /**\n             * Add an event listener\n             *\n             * @param name The event to subscribe to @param callback The callback function to invoke\n             * @return unbind function\n             */\n\n            value: function addListener(name, callback) {\n                var _this = this;\n\n                if (!this._eventEmitterChannels.hasOwnProperty(name)) {\n                    this._eventEmitterChannels[name] = [callback];\n                } else {\n                    this._eventEmitterChannels[name].push(callback);\n                }\n                return function () {\n                    return _this.removeListener(name, callback);\n                };\n            }\n        },\n        removeListener: {\n            /**\n             * Remove an event listener\n             *\n             * @param name The event to unsubscribe from\n             * @param callback The callback to unsubscribe\n             */\n\n            value: function removeListener(name, callback) {\n                var channels = this._eventEmitterChannels;\n                if (channels.hasOwnProperty(name)) {\n                    var channel = channels[name];\n                    var index = channel.indexOf(callback);\n                    if (index !== -1) {\n                        channel.splice(index, 1);\n                    }\n                }\n            }\n        },\n        removeAllListeners: {\n            /**\n             * Remove all event listeners\n             *\n             * @param name Event to reset (defaults to all)\n             */\n\n            value: function removeAllListeners(name) {\n                if (typeof name === \"undefined\") {\n                    this._eventEmitterChannels = {};\n                } else if (this._eventEmitterChannels.hasOwnProperty(name)) {\n                    delete this._eventEmitterChannels[name];\n                }\n            }\n        },\n        emitEvent: {\n            /**\n             * Emit an event\n             *\n             * @param name The event type\n             * @param payload Optional data passed to listeners\n             */\n\n            value: function emitEvent(name, payload) {\n                if (this._eventEmitterChannels.hasOwnProperty(name)) {\n                    var listeners = this._eventEmitterChannels[name];\n                    var _length = listeners.length;\n                    for (var i = 0; i < _length; i++) {\n                        listeners[i](payload);\n                    }\n                }\n            }\n        },\n        createListenerGroup: {\n            /**\n             * Create a group of listeners that can be unbound all together\n             *\n             * @return a group of listeners\n             */\n\n            value: function createListenerGroup() {\n                return new EventEmitterListenerGroup(this);\n            }\n        }\n    });\n\n    return EventEmitter;\n})();","\ntype EventEmitterCallback = (payload?: any) => any;\n\nclass EventEmitterListenerGroup<E> {\n\n  private _emitter: EventEmitter<E>;\n  private _unbind: Function[] = [];\n  \n  constructor(emitter: EventEmitter<E>) {\n    this._emitter = emitter;\n  }\n\n  /**\n   * Add an event listener\n   *\n   * @param name The event to subscribe to \n   * @param callback The callback function to invoke\n   */\n  addListener(name: E, callback: EventEmitterCallback): void {\n    let unbind = this._emitter.addListener(name, callback);\n    this._unbind.push(unbind);\n  }\n\n  /**\n   * Remove all event listeners in group\n   */\n  removeAllListeners(): void {\n    let unbinds = this._unbind;\n    let length  = unbinds.length;\n    for (let i = 0; i < length; i++) {\n      unbinds[i]();\n    }\n    this._unbind = [];\n  }\n\n}\n\nclass EventEmitter<E> {\n\n  private _eventEmitterChannels: { [name:number]: EventEmitterCallback[]; } = {};\n\n  /**\n   * Add an event listener\n   *\n   * @param name The event to subscribe to @param callback The callback function to invoke\n   * @return unbind function\n   */\n  addListener(name: E, callback: EventEmitterCallback): (...any) => any {\n    if (!this._eventEmitterChannels.hasOwnProperty(<any>name)) {\n      this._eventEmitterChannels[<any>name] = [callback];\n    } else {\n      this._eventEmitterChannels[<any>name].push(callback);\n    }\n    return () => this.removeListener(name, callback);\n  }\n\n  /**\n   * Remove an event listener\n   *\n   * @param name The event to unsubscribe from\n   * @param callback The callback to unsubscribe\n   */\n  removeListener(name: E, callback: EventEmitterCallback): void {\n    let channels = this._eventEmitterChannels;\n    if (channels.hasOwnProperty(<any>name)) {\n      let channel = channels[<any>name];\n      let index = channel.indexOf(callback);\n      if (index !== -1) {\n        channel.splice(index, 1);\n      }\n    }\n  }\n\n  /**\n   * Remove all event listeners\n   *\n   * @param name Event to reset (defaults to all)\n   */\n  removeAllListeners(name?: E): void {\n    if (typeof name === 'undefined') {\n      this._eventEmitterChannels = {};\n    } else if (this._eventEmitterChannels.hasOwnProperty(<any>name)) {\n      delete this._eventEmitterChannels[<any>name];\n    }\n  }\n\n  /**\n   * Emit an event\n   *\n   * @param name The event type\n   * @param payload Optional data passed to listeners\n   */\n  emitEvent(name: E, payload?: any): void {\n    if (this._eventEmitterChannels.hasOwnProperty(<any>name)) {\n      let listeners = this._eventEmitterChannels[<any>name];\n      let length = listeners.length;\n      for (let i = 0; i < length; i++) {\n        listeners[i](payload);\n      }\n    }\n  }\n\n  /**\n   * Create a group of listeners that can be unbound all together\n   *\n   * @return a group of listeners\n   */\n  createListenerGroup(): EventEmitterListenerGroup<E> {\n    return new EventEmitterListenerGroup(this);\n  }\n\n}\n"],"sourceRoot":"/source/"}